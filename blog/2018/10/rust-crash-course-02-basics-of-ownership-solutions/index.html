
    

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Basics of Ownership - Rust Crash Course lesson 2 - exercise solutions</title>

    <meta name="twitter:site" content="@snoyberg">
    <meta name="twitter:creator" content="@snoyberg">
    <meta name="og:site_name" content="Michael Snoyman's homepage">
    <meta name="og:title" content="Basics of Ownership - Rust Crash Course lesson 2 - exercise solutions">
    <meta name="og:type content="website">

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> 
    <link rel="stylesheet" href="/maxi/vendors/font-awesome/css/fontawesome-all.min.css">
    <link rel="stylesheet" type="text/css" href="/maxi/css/styles.css">

    

<meta name="og:description" value="Solutions to exercises in Rust crash course lesson 2, &quot;Basics of Ownership.&quot;
">






    <link rel="openid2.provider" href="https://openid.stackexchange.com/openid/provider">
    <link rel="openid2.local_id" href="https://openid.stackexchange.com/user/d26546d2-46db-4099-83ca-e1eccfa0dd8d">
    <link href="/rss.xml" type="application/atom+xml" rel="alternate" title="Michael Snoyman's blog">

    <style>.wt-section { padding-top: 2rem }</style>
  <body>
    <header class="inner-page">
      

<nav class="js-navbar-scroll navbar fixed-top navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img src="/img/snoylogo.png" height="50px">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo" aria-controls="navbarTogglerDemo" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse onCollapse" id="navbarTogglerDemo">
      <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="/blog">Blog</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://www.yesodweb.com/">Yesod</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="http://shop.oreilly.com/product/0636920035664.do">Yesod Book</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://www.beginrust.com/">Rust Book</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://www.youtube.com/c/snoyberg">YouTube</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://twitter.com/snoyberg">Twitter</a>
        </li>
        <li class="nav-item mr-4 mb-2 mb-lg-0">
          <a class="nav-link" href="https://github.com/snoyberg">Github</a>
        </li>
      </ul>
    </div>
  </div>
</nav>



      <section class="wt-section bg-gray text-center inner-page-header" style="padding-top:100px">
        <div class="container">
          <div class="row justify-content-md-center align-items-center text-white py-lg-5">
            <div class="col-md-7">
              <div class="text-center">
                <h1 class="display-sm-4 display-lg-3">Basics of Ownership - Rust Crash Course lesson 2 - exercise solutions</h1>
                
<p class="h6 text-uppercase wt-letter-spacing-sm mb-0">Published October 31, 2018</p>

              </div>
            </div>
          </div>
        </div>
      </section>
    </header>

    <main role="main">
      <section class="wt-section">
        <div class="container">
          <div class="row justify-content-between">
            <div class="col-lg-12">
              <p class="text-center">
                <a class="btn" style="background: #72472f; color: #fff; font-weight: bold" href="https://www.beginrust.com/">New: The "Begin Rust" book</a>
              </p>

              




  


<div class="share-bar-wrapper">
  <div class="share-bar-inner">
    <b>Share this</b>
    <a target="_blank" href="https://twitter.com/intent/tweet?text=Basics%20of%20Ownership%20-%20Rust%20Crash%20Course%20lesson%202%20-%20exercise%20solutions https%3A&#x2F;&#x2F;www.snoyman.com&#x2F;blog&#x2F;2018&#x2F;10&#x2F;rust-crash-course-02-basics-of-ownership-solutions&#x2F;" title="Share on Twitter">
      <i class="fab fa-twitter"></i>
    </a>

    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A&#x2F;&#x2F;www.snoyman.com&#x2F;blog&#x2F;2018&#x2F;10&#x2F;rust-crash-course-02-basics-of-ownership-solutions&#x2F;" title="Share on Facebook">
      <i class="fab fa-facebook"></i>
    </a>

    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A&#x2F;&#x2F;www.snoyman.com&#x2F;blog&#x2F;2018&#x2F;10&#x2F;rust-crash-course-02-basics-of-ownership-solutions&#x2F;&amp;title=Basics%20of%20Ownership%20-%20Rust%20Crash%20Course%20lesson%202%20-%20exercise%20solutions" title="Share on LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>

    <a target="_blank" href="https://www.reddit.com/submit?url=https%3A&#x2F;&#x2F;www.snoyman.com&#x2F;blog&#x2F;2018&#x2F;10&#x2F;rust-crash-course-02-basics-of-ownership-solutions&#x2F;" title="Share on Reddit">
      <i class="fab fa-reddit"></i>
    </a>
  </div>
</div>



<!--
<div class="container" id="blog-body">
  <div class="row">
    <div class="col-lg-9">
-->
      <p>
        <i>
          See a typo? Have a suggestion?
          <a target="_blank" rel="nofollow" href="https://github.com/snoyberg/snoyman.com/edit/master/content/blog&#x2F;rust-crash-course-02-basics-of-ownership-solutions.md">Edit this page on Github</a>
        </i>
      </p>

      <p><strong>Heads up</strong> This blog post series has been updated and published as an eBook by FP Complete. I'd recommend reading that version instead of these posts. If you're interested, please check out the <a href="https://www.fpcomplete.com/rust/crash-course/">Rust Crash Course eBook</a>.</p>
<p>Below are the solutions to the exercises from the last Rust Crash
Course lesson, &quot;Basics of Ownership.&quot;</p>
<p>This post is part of a series based on <a href="https://www.fpcomplete.com/rust">teaching Rust at FP
Complete</a>. If you're reading this post outside
of the blog, you can find links to all posts in the series <a href="https://www.snoyman.com/blog/2018/10/introducing-rust-crash-course">at the top of the
introduction
post</a>. You
can also <a href="https://www.snoyman.com/feed/rust-crash-course">subscribe to the RSS
feed</a>.</p>
<h2 id="exercise-1">Exercise 1</h2>
<p>Implementing <code>drop</code> is fairly simple. We need a function that allows a
value to be moved into it, and then does nothing with that value.</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#268bd2;">fn </span><span style="color:#b58900;">drop</span><span style="color:#657b83;">&lt;T&gt;(</span><span style="color:#859900;">_</span><span style="color:#657b83;">: T) {
}
</span></code></pre>
<p>And surprise: check out <a href="https://github.com/rust-lang/rust/blob/8bf7fda6b5fec99a11ae0fb8d5c3dbd150063741/src/libcore/mem.rs#L776">the actual <code>drop</code>
function</a>.</p>
<h2 id="exercise-2">Exercise 2</h2>
<p>The important trick to implement this method syntax is that the first
parameter <em>must</em> be some form of <code>self</code>. We want to keep this as an
immutable reference, so we use <code>&amp;self</code>.</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">#[</span><span style="color:#268bd2;">derive</span><span style="color:#657b83;">(Debug)]
</span><span style="color:#268bd2;">struct </span><span style="color:#b58900;">Foobar</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">i32</span><span style="color:#657b83;">);

</span><span style="color:#268bd2;">impl </span><span style="color:#657b83;">Drop </span><span style="color:#859900;">for </span><span style="color:#b58900;">Foobar </span><span style="color:#657b83;">{
    </span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">drop</span><span style="color:#657b83;">(</span><span style="color:#859900;">&amp;</span><span style="color:#586e75;">mut </span><span style="color:#268bd2;">self</span><span style="color:#657b83;">) {
        </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">Dropping a Foobar: </span><span style="color:#cb4b16;">{:?}</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#d33682;">self</span><span style="color:#657b83;">);
    }
}

</span><span style="color:#268bd2;">impl </span><span style="color:#b58900;">Foobar </span><span style="color:#657b83;">{
    </span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">use_it</span><span style="color:#657b83;">(</span><span style="color:#859900;">&amp;</span><span style="color:#268bd2;">self</span><span style="color:#657b83;">) {
        </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">I consumed a Foobar: </span><span style="color:#cb4b16;">{:?}</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#d33682;">self</span><span style="color:#657b83;">);
    }
}

</span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">main</span><span style="color:#657b83;">() {
    </span><span style="color:#268bd2;">let</span><span style="color:#657b83;"> x = Foobar(</span><span style="color:#6c71c4;">1</span><span style="color:#657b83;">);
    </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">Before uses_foobar</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">);
    x.</span><span style="color:#859900;">use_it</span><span style="color:#657b83;">();
    x.</span><span style="color:#859900;">use_it</span><span style="color:#657b83;">();
    </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">After uses_foobar</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">);
}
</span></code></pre>
<p>You may be wondering: why does the code use <code>x.use_it()</code>? <code>use_it</code>
requires a <em>reference</em> to a <code>Foobar</code>, but <code>x</code> is a <code>Foobar</code>! In fact,
you may have ended up writing something like this:</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#268bd2;">fn </span><span style="color:#b58900;">main</span><span style="color:#657b83;">() {
    </span><span style="color:#268bd2;">let</span><span style="color:#657b83;"> x = Foobar(</span><span style="color:#6c71c4;">1</span><span style="color:#657b83;">);
    </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">Before uses_foobar</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">);
    (</span><span style="color:#859900;">&amp;</span><span style="color:#657b83;">x).</span><span style="color:#859900;">use_it</span><span style="color:#657b83;">();
    (</span><span style="color:#859900;">&amp;</span><span style="color:#657b83;">x).</span><span style="color:#859900;">use_it</span><span style="color:#657b83;">();
    </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">After uses_foobar</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">);
}
</span></code></pre>
<p>While that's perfectly valid code, it's also unnecessary: Rust will
automatically take a reference to a value in the case of a method
call.</p>
<h2 id="exercise-3">Exercise 3</h2>
<p>The original code doesn't compile, since our <code>x</code> value was
moved. However, if we have a <code>Copy</code> implementation, Rust will
automatically create a copy of the value for us. As I hinted, you can
do this easily by using automatic deriving:</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">#[</span><span style="color:#268bd2;">derive</span><span style="color:#657b83;">(Debug, Clone, Copy)]
</span><span style="color:#268bd2;">struct </span><span style="color:#b58900;">Foobar</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">i32</span><span style="color:#657b83;">);

</span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">uses_foobar</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">foobar</span><span style="color:#657b83;">: Foobar) {
    </span><span style="color:#859900;">println!</span><span style="color:#657b83;">(</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">I consumed a Foobar: </span><span style="color:#cb4b16;">{:?}</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, foobar);
}

</span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">main</span><span style="color:#657b83;">() {
    </span><span style="color:#268bd2;">let</span><span style="color:#657b83;"> x = Foobar(</span><span style="color:#6c71c4;">1</span><span style="color:#657b83;">);
    </span><span style="color:#859900;">uses_foobar</span><span style="color:#657b83;">(x);
    </span><span style="color:#859900;">uses_foobar</span><span style="color:#657b83;">(x);
}
</span></code></pre>
<p>If you want to be more explicit, you can write the implementations
directly. Note that, to the best of my knowledge, there's no advantage
to doing so, at least in this case:</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#268bd2;">impl </span><span style="color:#657b83;">Clone </span><span style="color:#859900;">for </span><span style="color:#b58900;">Foobar </span><span style="color:#657b83;">{
    </span><span style="color:#268bd2;">fn </span><span style="color:#b58900;">clone</span><span style="color:#657b83;">(</span><span style="color:#859900;">&amp;</span><span style="color:#268bd2;">self</span><span style="color:#657b83;">) -&gt; </span><span style="color:#268bd2;">Self </span><span style="color:#657b83;">{
        Foobar(</span><span style="color:#d33682;">self</span><span style="color:#657b83;">.</span><span style="color:#6c71c4;">0</span><span style="color:#657b83;">)
    }
}
</span><span style="color:#268bd2;">impl </span><span style="color:#657b83;">Copy </span><span style="color:#859900;">for </span><span style="color:#b58900;">Foobar </span><span style="color:#657b83;">{
}
</span></code></pre>
<p>There's no need for a body for the <code>Copy</code> trait. Its only purpose is
as a signal to the compiler that it's acceptable to copy when needed.</p>
<h2 id="exercise-4">Exercise 4</h2>
<p>We're not taking a reference to <code>x</code> when calling <code>double</code>, so our
<code>double</code> function needs to take an actual <code>Foobar</code>, not a reference to
one. It must also return a <code>Foobar</code>. One implementation we could come
up with is:</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#268bd2;">fn </span><span style="color:#b58900;">double</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">foobar</span><span style="color:#657b83;">: Foobar) -&gt; Foobar {
    Foobar(foobar.</span><span style="color:#6c71c4;">0 </span><span style="color:#657b83;">* </span><span style="color:#6c71c4;">2</span><span style="color:#657b83;">)
}
</span></code></pre>
<p>This takes in an immutable <code>Foobar</code>, and then constructs a new
<code>Foobar</code> from the value inside of it. Another option, however, would
be to mutate the original <code>Foobar</code> and then return it:</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#268bd2;">fn </span><span style="color:#b58900;">double</span><span style="color:#657b83;">(</span><span style="color:#586e75;">mut </span><span style="color:#268bd2;">foobar</span><span style="color:#657b83;">: Foobar) -&gt; Foobar {
    foobar.</span><span style="color:#6c71c4;">0 </span><span style="color:#657b83;">*= </span><span style="color:#6c71c4;">2</span><span style="color:#657b83;">;
    foobar
}
</span></code></pre>
<p>The Haskeller in me prefers the first implementation, since it has
less mutation. The troll in me loves the second one, since it lets me
taunt the Haskeller in me.</p>
<p><a href="https://www.fpcomplete.com/rust">Rust at FP Complete</a> | <a href="https://www.snoyman.com/blog/2018/10/introducing-rust-crash-course">Introduction</a></p>


<div class="text-center"><a href="/blog/" class="btn btn-primary">Read more blog posts</a></div>

      <div id="disqus_thread"></div>
      <script>
        (function() {var d = document, s = d.createElement('script'); s.src = '//snoyberg.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s);})();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!--
    </div>

    <div class="col-lg-3" id="archive">
      <h3>Blog archive</h3>
      <ul class="blog-archive">
            $forall ((year, month, slug), post) <- posts
                <li>
                    <a href=@?{addPreview $ PostR year month slug}>#{postTitle post}
                    \ #
                    <i>#{prettyDay now (postTime post)}
-->

<div class="text-center"><a href="/blog/" class="btn btn-primary">Read more blog posts</a></div>


            </div>
          </div>
        </div>
      </section>
    </main>

    
<footer class="bg-dark py-5">
  <ul class="list-inline text-center text-md-right mb-0">
    <li class="list-inline-item mx-2">
      <a href="https://twitter.com/snoyberg">Follow @snoyberg</a>
    </li>
    <li class="list-inline-item mx-2">
      <a href="https://twitter.com/intent/tweet?screen_name=snoyberg">Tweet to @snoyberg</a>
    </li>
    <li class="list-inline-item mx-2">
      <a href="https://github.com/snoyberg">Github</a>
    </li>
    <li class="list-inline-item mx-2">
      <a href="https://tech.fpcomplete.com/">FP Complete</a>
    </li>
    <li class="list-inline-item mx-2">
      <a href="https://www.haskellers.com/user/snoyberg">I'm a Haskeller</a>
    </li>
  </ul>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1434510-21', 'auto');
  ga('send', 'pageview');
</script>

<!-- JS Script Files -->
<!-- Global Vendor -->
<script src="/maxi/vendors/jquery.min.js"></script>
<script src="/maxi/vendors/jquery.migrate.min.js"></script>
<script src="/maxi/vendors/popper.min.js"></script>
<script src="/maxi/vendors/bootstrap/js/bootstrap.min.js"></script>

<!-- Components Vendor  --> 
<script src="/maxi/contact/jqBootstrapValidation.js"></script>
<!--Plugin Initialize-->
<script src="/maxi/js/global.js"></script>
<!-- END JAVASCRIPTS -->


  </body>
</html>
